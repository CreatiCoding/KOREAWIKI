# github auto deploy webhook with aws ec2를 하려다가 발생한 접속 장애 발생 문서

## Overview

깃허브를 통해 자동 배포를 원하여 웹훅을 사용하기 위해 ssh를 만들던 도중 여러번의 시도를 했습니다. 그러다가 .ssh을 rm -rf로 지워버렸는데 ubuntu의 계정에서 진행했습니다. 덕분에 해당 ec2는 작업했던 세션이 끝나고 난 뒤 접속을 할 수 없는 장애를 겪게 되었습니다.

## Reason

.ssh 폴더를 지운 것이 원인

## Preventation

어떤 작업을 할 땐 항상 새로운 계정을 만들고 작업하길 권고

## Solution

다행히 ec2를 백업하는 AMI 기능은 이 문제를 해결해 줍니다. 상세히 말하자면 .ssh를 초기화하진 않고 (등록했던 웹 훅이 그대로 동작했습니다.) 아마 aws에서 key를 등록할 때 .ssh를 참조하여 등록하는 모양. 이미 등록했던 ssh와 동일한 ssh 키로 ssh를 접속할 수 있었습니다.딱히 ssh를 분실하거나 노출한 것은 아니었기에 따로 변경작업은 진행하지 않고 그대로 서비스 이용이 가능합니다.
